# Requirements

## Functional (FR)
- FR1: 用户可在前端通过代码编辑器与策略模板，提交回测作业，包含策略代码、参数、数据区间、频率等。
- FR2: 系统提供回测作业状态查询接口，支持 queued/running/succeeded/failed/early-stopped。
- FR3: 用户可查看回测结果摘要（净值曲线、交易明细、核心指标），支持结果下载/导出。
- FR4: 参数网格寻优：提交参数空间、查看寻优状态与汇总结果，支持并发、早停、重试。
- FR5: 策略管理最小集：策略注册、元数据、标签、依赖（requirements）声明、基于时间戳的版本标识。
- FR6: 鉴权与账号：基于 Supabase 完成登录/注册与会话管理。
- FR7: 数据获取：对接 Tushare（日线、5/15 分钟），实现频控与缓存。
- FR8: 队列与执行：基于 Redis + Python worker 执行回测/寻优作业；提供重试、超时与早停策略。
- FR9: 前端可视化：使用 ECharts/Recharts 展示收益/回撤/夏普、交易列表、核心图表模板。
- FR10: 历史记录：用户可查看过往回测/寻优作业与结果摘要并复运行。
- FR11: 软计费占位：提供 Free/Pro 与配额规则展示；记录使用量但不触发扣费。
- FR12: 健康检查/可用性检测：提供健康检查接口或 canary 页面。

## Non-Functional (NFR)
- NFR1: 队列性能目标：平均排队 ≤ 30s；在压力下 P95 ≤ 2min。
- NFR2: 首屏性能：结果页概要首屏在 2 秒内完成渲染。
- NFR3: 可观测性：日志、作业状态追踪、错误告警与基础指标采集。
- NFR4: 安全与隔离：用户数据隔离、最小权限访问；研究用途免责声明显著展示。
- NFR5: 可靠性与稳健性：对外部数据源实施频控与缓存；重试/退避策略明确。
- NFR6: 成本效率：在不影响目标的前提下优先利用降低集成复杂度与成本的方案。
- NFR7: 可扩展性：并发寻优任务在单用户场景下具备可扩展能力；为后续多租户演进保留空间。
- NFR8: 可维护性与可移植性：策略依赖声明与沙箱/容器化执行，清晰边界与版本化。

---
