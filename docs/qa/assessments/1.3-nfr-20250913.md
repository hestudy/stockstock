# NFR Assessment: 1.3

Date: 2025-09-13
Reviewer: Quinn

## Summary

- Security: CONCERNS - 实现声明存在（JWT、速率限制、幂等键），但缺少可验证证据与配置阈值（如具体限流策略/密钥管理细节）。
- Performance: CONCERNS - 未发现明确的响应时间/资源阈值目标（Target unknown）。
- Reliability: CONCERNS - 失败处理与重试路径在 Story/Dev Notes 中有描述，但缺少健康检查/熔断与监控证据。
- Maintainability: CONCERNS - 单元与集成测试已覆盖关键路径，E2E 为占位；缺少覆盖率与文档目标的量化证据。

## Critical Issues

1. 安全阈值未量化（Security）
   - 风险：限流策略不清晰，存在误配或被绕过风险；密钥管理策略未展示。
   - 建议：在后端/API 层明确 `RATE_LIMIT_*` 与 JWT 续签策略（refresh token/过期/旋转）；补充密钥管理与泄漏监测说明。

2. 性能目标缺失（Performance）
   - 风险：无明确响应时间目标，难以进行回归/性能守门。
   - 建议：为关键 API（POST /api/v1/backtests）设定 SLO（例如 P95 < 300ms，P99 < 800ms）并在 CI/CD 中附性能基线。

3. 可靠性可观测性不足（Reliability）
   - 风险：缺少健康检查/熔断/重试度量，遇到后端队列/外部依赖抖动时恢复策略不透明。
   - 建议：增加 `/health`/`/ready` 检查、重试与退避指标记录；必要时引入断路器模式与告警阈值。

4. 可维护性证据不足（Maintainability）
   - 风险：缺少覆盖率阈值与文档标准，长期可能导致质量漂移。
   - 建议：设置门槛（例如 均值覆盖率 ≥ 80%，关键路径 ≥ 90%），并在 PR 检查中强制；补充关键模块文档与 ADR。

## Quick Wins

- 明确并记录限流与 JWT 策略（含刷新/旋转）— ~2 小时。
- 设定并记录性能 SLO（P95/P99 与并发/容量假设）— ~1 小时。
- 加入基本健康检查与可观测性（/health、日志关键字段、错误分类统计）— ~2 小时。
- 在 CI 增加覆盖率阈值与报告产出（如 80% 基线）— ~1 小时。

## Notes & Evidence

- 来源文档：`docs/stories/1.3.backtest-submit.md`（AC 与 Dev Notes），未发现架构文档中的明确性能阈值。
- 任务状态：Story 标记 Ready for Review；E2E 仍为占位（后续故事完善）。

```
NFR assessment: docs/qa/assessments/1.3-nfr-20250913.md
```

```
Gate NFR block ready → paste into docs/qa/gates/1.3-backtest-submit.yml under nfr_validation
```
