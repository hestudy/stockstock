# NFR Assessment: 1.4

Date: 2025-09-19
Reviewer: Quinn

## Summary

- Security: PASS - API 采用 JWT 鉴权并基于 ownerId 进行访问控制；为 status/result API 增加速率限制与参数校验。
- Performance: PASS - 首屏摘要 2 秒目标通过单测/集成测试与 E2E 验证；采用“摘要先行 → 曲线懒加载”的加载策略。
- Reliability: PASS - 统一错误结构 `ApiError` 与错误映射；占位骨架与状态轮询保障可用性；失败/空态具备可恢复路径。
- Maintainability: PASS - 单测/集成/E2E 已形成闭环，覆盖率（web 包）Statements 88.72%、Lines 88.72%；类型契约集中在 `packages/shared`。

## Evidence

- Story: `docs/stories/1.4.status-basic-result.md`（AC1, AC2, AC3, AC5, AC6, AC7）
- Auth & Validation: `apps/web/src/app/api/_lib/auth.ts`, `apps/web/src/app/api/_lib/validate.ts`
- Rate limiting: `apps/web/src/app/api/_lib/rateLimit.ts`
- API routes: `apps/web/src/app/api/v1/backtests/[id]/status/route.ts`, `.../result/route.ts`
- Testing:
  - Unit/Integration: 多文件覆盖状态轮询、2s 断言、导出、错误/空态
  - E2E: `apps/web/e2e/backtests-detail.spec.ts`（2 秒摘要、导出、错误/空态、A11y）
- Coverage: Story 内 Debug Log（Statements 88.72%, Branches 76.51%, Functions 77.41%, Lines 88.72%）

## Critical Issues

- 无阻断性问题。

## Quick Wins

- 导出能力文档化：在 README/组件注释中明确 CSV/JSON 列与键名，测试中覆盖失败提示分支（已有基础）。
- 图表交互与大数据量：在 Playwright 增补缩放/tooltip 与大样本断言，提高 AC3 可信度。

---

Gate NFR block ready → paste into qa.qaLocation/gates/1.4-status-basic-result.yml under nfr_validation

NFR assessment: qa.qaLocation/assessments/1.4-nfr-20250919.md
