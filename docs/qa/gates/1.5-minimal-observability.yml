# <!-- Powered by BMAD™ Core -->
schema: 1
story: "1.5"
story_title: "Minimal Observability"
gate: "PASS" # PASS|CONCERNS|FAIL|WAIVED
status_reason: "错误映射回归（25 项 Vitest 断言）确认鉴权/参数/限流/超时/网络/上游异常提示一致，且 FE/API/Workers 观测封装与运行时开关仍稳定；路由级指标覆盖 200/401/429/503 并携带 exporter/duration 标签，单测＋集成＋Pytest 闭环全部通过。残留 UX-001 属增强建议。"
reviewer: "Quinn (Test Architect)"
updated: "2025-09-22T14:40:00+08:00"

waiver: { active: false }

top_issues:
  - id: "UX-001"
    severity: low
    finding: "错误码→用户提示 映射矩阵不完整"
    suggested_action: "扩充映射清单并补充断言用例，覆盖鉴权、参数、频控、上游不可用等常见分支"

nfr_validation:
  _assessed: [security, performance, reliability, maintainability]
  security:
    status: PASS
    notes: "`SECURITY.md` 已文档化 secrets 来源/轮换与敏感端点频控表；路由级集成测试覆盖 429 分支；统一错误包装避免信息泄露"
  performance:
    status: PASS
    notes: "E2E 验证 2s 首屏；API timeHttp 记录路由级时延"
  reliability:
    status: PASS
    notes: "统一错误包装与多分支测试；Workers 结构化日志与单测"
  maintainability:
    status: PASS
    notes: "CI 覆盖率阈值已设（建议线：L/S/F≥80%、B≥70%）；OTEL 导出器与 OBS 开关运行时切换用例已补齐，前端 NEXT_PUBLIC_* 变体测试覆盖已完成；API status/result 集成测试验证成功/401/429/503 指标标签；建议补充 400（INVALID_ID）路径断言并保持 UX 文案映射配置化"

# Optional section: evidence summary
# evidence:
#   story_file: docs/stories/1.5.minimal-observability.md
#   nfr_assessment: docs/qa/assessments/1.5-nfr-20250919.md
